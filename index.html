<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>WikiQuest | Find a Match</title>
	<link rel="stylesheet" type="text/css" href="css/wikiQuest.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
</head>

<body>
<h1>WikiQuest</h1>
<div class="leftSection">
	<h3> Aviable matches 
		<a class="button" href="javascript:createButton()">Create</a>
		<a class="button secondary" href="javascript:startMatch('solo','loner')">Solo</a>
	</h3>
	<ul id="matchesList"></ul>
</div>
<div class="rightSection">
	<h3> How to play</h3>
	<div id="tutorialFrame">Under construction, click solo for now, sorry. :c</div>
	<h3> Match Info <span>username: <input type="text" id="nameInput"></span></h3>
	<div id="infoFrame">
		Under construction, no matches yet. Use solo to play.
	</div>
</div>

<script type="text/javascript">
	//TODO move to another file
    //variables
    var fireRef = new Firebase("https://glowing-torch-4056.firebaseio.com/WikiQuest");
    var matchesRef = fireRef.child("matches");
    var createdMatchRef;
    var currentMatch;
    //functions
    function createMatch(username){
    	createdMatchRef = matchesRef.push({
		    creator: username,
		    started: false
		  });
    }
    function joinMatch(matchKey, username){
    	//asign and display current joined match
    	currentMatch = matchKey
    }
    function startMatch(matchKey, username){
    	//send to other URL and send the currentMatchKey
    	window.location.href = 'game.html?match='+matchKey+'&username='+username;
    }
    //display functions
    function displayMatchInfo(){
    	//display current match info, creator, users in it etc
    }
    function displayUsernameError(){
    	alert('You need type a username');
    }
    //button handlers
    function createButton(){
    	var username = $('#nameInput').val();
    	if(username != ''){
    		createMatch(username);
    	}
    	else{
    		displayUsernameError();
    	}
    }

</script>
</body>

</html>